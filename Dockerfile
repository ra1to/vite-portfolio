# ----------------------------------------------------
# 開発・ビルド用のステージ
# bun の公式イメージをベースに使用。Node.js も含まれています。
FROM oven/bun:latest AS development

# 作業ディレクトリを /app に設定
WORKDIR /app

# bun と npm の両方で依存関係を管理できるようにファイルをコピー
# これにより、キャッシュを利用した高速な依存関係のインストールが可能になります
COPY package.json bun.lockb /app/

# ホストの全ファイルをコンテナの作業ディレクトリにコピー
COPY . /app

# コンテナが外部サービス（データベースなど）と通信する場合に備えて、
# このポートは公開ポート（EXPOSE）としてマークされますが、
# 外部公開は docker-compose.yml で行います。
EXPOSE 3000
EXPOSE 6006